# レシートキャンペーンCMS サイトマップ

## 概要
レシートキャンペーンCMSは、管理者とクライアントがそれぞれ異なる権限でキャンペーンを管理できるシステムです。個人情報収集機能を備えたレシートキャンペーンの作成・管理・応募を一元化したプラットフォームです。

## ページ構成

### 1. 共通ページ

#### 1.1 ログイン画面 ([index.html](../index.html))
- **URL**: [トップページ](../index.html)
- **説明**: システムのエントリーポイント
- **機能**:
  - 管理者ログイン
  - クライアントログイン（プロジェクトID + パスワード）
  - 認証処理
  - ログイン状態の保持
- **アクセス権限**: 未認証ユーザー
- **ファイルサイズ**: 10KB

---

### 2. 管理者機能 (`/admin/`)

#### 2.1 管理者ダッシュボード ([admin/dashboard.html](../admin/dashboard.html))
- **URL**: [管理者ダッシュボード](../admin/dashboard.html)
- **説明**: 管理者のメイン画面
- **機能**:
  - 統計情報の表示（プロジェクト数、ユーザー数、公開中プロジェクト数）
  - 新規プロジェクト作成モーダル
  - ログイン情報の自動生成とメールテキスト作成
  - 最近のアクティビティ表示
  - プロジェクト管理・ユーザー管理へのナビゲーション
- **アクセス権限**: 管理者のみ
- **ファイルサイズ**: 22KB

#### 2.2 プロジェクト管理 ([admin/projects.html](../admin/projects.html))
- **URL**: [プロジェクト管理](../admin/projects.html)
- **説明**: 全プロジェクトの管理画面
- **機能**:
  - プロジェクト一覧表示（グリッド表示）
  - プロジェクト検索・フィルター機能
  - プロジェクト作成・編集・削除
  - プロジェクト詳細表示
  - ステータス管理（作成中、公開中、終了）
  - ページネーション
- **アクセス権限**: 管理者のみ
- **ファイルサイズ**: 33KB

#### 2.3 プロジェクト詳細 ([admin/project-detail.html](../admin/project-detail.html))
- **URL**: [プロジェクト詳細](../admin/project-detail.html)
- **説明**: 個別プロジェクトの詳細管理画面
- **機能**:
  - プロジェクト基本情報表示
  - 応募データ統計
  - 応募者一覧表示
  - レシート画像一覧
  - プロジェクト設定編集
- **アクセス権限**: 管理者のみ
- **ファイルサイズ**: 16KB

#### 2.4 ユーザー管理 ([admin/users.html](../admin/users.html))
- **URL**: [ユーザー管理](../admin/users.html)
- **説明**: クライアントユーザーの管理画面
- **機能**:
  - ユーザー一覧表示
  - ユーザー検索・フィルター
  - ユーザー作成・編集・削除
  - 権限管理（管理者/クライアント）
  - ステータス管理（有効/無効）
  - パスワードリセット機能
- **アクセス権限**: 管理者のみ
- **ファイルサイズ**: 27KB

---

### 3. クライアント機能 (`/client/`)

#### 3.1 クライアントダッシュボード ([client/dashboard.html](../client/dashboard.html))
- **URL**: [クライアントダッシュボード](../client/dashboard.html)
- **説明**: クライアントのメイン画面
- **機能**:
  - プロジェクト概要表示
  - 応募統計情報
  - 最近の応募者表示
  - プロジェクトセットアップへのナビゲーション
  - 応募者管理・ユーザー管理へのナビゲーション
- **アクセス権限**: クライアントのみ
- **ファイルサイズ**: 22KB

#### 3.2 プロジェクトセットアップ ([client/setup.html](../client/setup.html))
- **URL**: [プロジェクトセットアップ](../client/setup.html)
- **説明**: キャンペーンの詳細設定画面
- **機能**:
  - **キャンペーン設定タブ**:
    - キャンペーン設計（タイトル、開始日、終了日）
    - キャンペーンサイトテキスト（対象商品、対象店舗、応募方法、賞品、期間、資格、注意事項など）
  - **フォーム設定タブ**:
    - **個人情報フォーム設定**（新機能）:
      - 名前（必須）
      - メールアドレス（必須）
      - メールアドレス確認用（必須）
      - 郵便番号（必須）
      - 住所（必須）
      - 電話番号（必須）
    - アンケート項目設定（動的追加・削除）
    - レシートアップロード設定（最大枚数、説明文）
  - **メインビジュアル設定タブ**:
    - 画像アップロード機能
    - プレビュー機能
  - プレビュー・テスト・公開機能
- **アクセス権限**: クライアントのみ
- **ファイルサイズ**: 36KB

#### 3.3 応募者管理 ([client/submissions.html](../client/submissions.html))
- **URL**: [応募者管理](../client/submissions.html)
- **説明**: 応募データの管理画面
- **機能**:
  - 応募者一覧表示
  - 個人情報表示（名前、メール、住所、電話番号）
  - アンケート回答表示
  - レシート画像表示
  - 応募データ検索・フィルター
  - CSVエクスポート機能
  - 当選者選定機能
- **アクセス権限**: クライアントのみ
- **ファイルサイズ**: 33KB

#### 3.4 ユーザー作成 ([client/users.html](../client/users.html))
- **URL**: [ユーザー作成](../client/users.html)
- **説明**: クライアント用のユーザー管理画面
- **機能**:
  - プロジェクトメンバー一覧
  - 新規ユーザー作成
  - 権限設定
  - ユーザー編集・削除
- **アクセス権限**: クライアントのみ
- **ファイルサイズ**: 15KB

---

### 4. キャンペーンページ（公開ページ）(`/campaign/`)

#### 4.1 キャンペーントップページ ([campaign/top.html](../campaign/top.html))
- **URL**: [キャンペーントップページ](../campaign/top.html)
- **説明**: キャンペーンのメインページ
- **機能**:
  - メインビジュアル表示
  - キャンペーン内容表示（対象商品、期間、賞品など）
  - 応募ボタン
  - レスポンシブデザイン
  - 注意事項・個人情報取り扱い表示
- **アクセス権限**: 誰でもアクセス可能
- **ファイルサイズ**: 22KB

#### 4.2 応募フォーム ([campaign/form.html](../campaign/form.html))
- **URL**: [応募フォーム](../campaign/form.html)
- **説明**: 個人情報入力とアンケート・レシートアップロードフォーム
- **機能**:
  - **個人情報セクション**（新機能）:
    - 名前（必須）
    - メールアドレス（必須）
    - メールアドレス確認用（必須）
    - 郵便番号（必須、形式チェック）
    - 住所（必須）
    - 電話番号（必須、形式チェック）
  - **アンケートセクション**:
    - 動的アンケートフォーム生成
    - テキスト、長文、ラジオ、チェックボックス対応
  - **レシートアップロードセクション**:
    - レシートアップロード（最大20枚）
    - ドラッグ&ドロップ対応
    - プレビュー機能
  - リアルタイムバリデーション
  - プログレスバー表示
- **アクセス権限**: 誰でもアクセス可能
- **ファイルサイズ**: 28KB

#### 4.3 確認画面 ([campaign/confirm.html](../campaign/confirm.html))
- **URL**: [確認画面](../campaign/confirm.html)
- **説明**: 応募内容の確認画面
- **機能**:
  - **個人情報確認**（新機能）:
    - 名前、メール、住所、電話番号の確認表示
  - アンケート回答確認
  - レシートアップロード確認
  - 修正機能（前の画面に戻る）
  - 応募確定処理
- **アクセス権限**: 誰でもアクセス可能
- **ファイルサイズ**: 14KB

#### 4.4 完了画面 ([campaign/complete.html](../campaign/complete.html))
- **URL**: [完了画面](../campaign/complete.html)
- **説明**: 応募完了画面
- **機能**:
  - 完了メッセージ表示
  - 応募番号生成
  - 今後の流れ説明
  - 印刷機能
  - トップページへの戻るボタン
- **アクセス権限**: 誰でもアクセス可能
- **ファイルサイズ**: 7.7KB

---

## ナビゲーション構造

### 管理者ナビゲーション
```
ログイン → ダッシュボード
           ├── プロジェクト管理
           │   ├── プロジェクト一覧
           │   ├── 新規作成
           │   ├── プロジェクト詳細
           │   └── 編集・削除
           └── ユーザー管理
               ├── ユーザー一覧
               ├── 新規作成
               └── 編集・削除
```

### クライアントナビゲーション
```
ログイン → ダッシュボード
           ├── プロジェクトセットアップ
           │   ├── キャンペーン設定
           │   ├── フォーム設定
           │   │   ├── 個人情報フォーム設定
           │   │   ├── アンケート項目設定
           │   │   └── レシートアップロード設定
           │   ├── メインビジュアル設定
           │   ├── プレビュー
           │   ├── テスト
           │   └── 公開
           ├── 応募者管理
           │   ├── 応募者一覧
           │   ├── 個人情報表示
           │   ├── レシート画像表示
           │   ├── CSVエクスポート
           │   └── 当選者選定
           └── ユーザー作成
               ├── メンバー一覧
               ├── 新規作成
               └── 権限設定
```

### キャンペーンフロー
```
トップページ → 応募フォーム → 確認画面 → 完了画面
                ↓
            個人情報入力 → アンケート回答 → レシートアップロード
```

---

## 機能詳細

### 個人情報管理機能（新機能）
- **必須項目**: 名前、メールアドレス、メールアドレス確認用、郵便番号、住所、電話番号
- **バリデーション**:
  - メールアドレス形式チェック
  - メールアドレス確認一致チェック
  - 郵便番号形式チェック（123-4567 または 1234567）
  - 電話番号形式チェック（090-1234-5678）
- **セキュリティ**: 個人情報の適切な取り扱い表示

### アンケート機能
- **対応形式**: テキスト、長文、ラジオボタン、チェックボックス
- **動的生成**: クライアントが自由に質問を追加・編集可能
- **必須設定**: 各質問項目の必須/任意設定

### レシートアップロード機能
- **最大枚数**: 1〜20枚（設定可能）
- **対応形式**: PNG, JPG, GIF
- **ファイルサイズ**: 最大5MB
- **プレビュー**: アップロード前の画像確認

---

## 技術仕様

### 認証・セッション管理
- **認証方式**: ローカルストレージベース
- **セッション管理**: ブラウザローカルストレージ
- **権限管理**: 管理者 / クライアント / 一般ユーザー
- **セッション有効期限**: ブラウザセッション中

### データ管理
- **フロントエンド**: HTML5 + CSS3 + JavaScript (ES6+)
- **スタイリング**: Tailwind CSS 3.x
- **データ保存**: ローカルストレージ（デモ用）
- **画像処理**: ブラウザネイティブ機能（FileReader API）
- **バリデーション**: クライアントサイドJavaScript

### レスポンシブ対応
- **デバイス**: デスクトップ、タブレット、スマートフォン
- **ブレークポイント**: Tailwind CSS標準（sm, md, lg, xl）
- **画像**: レスポンシブ画像対応
- **タッチ操作**: モバイルデバイス対応

### アクセシビリティ
- **キーボード操作**: 全機能でキーボード操作対応
- **スクリーンリーダー**: 適切なラベルとaria属性
- **色覚対応**: 色だけでなく形状でも情報を表現
- **フォントサイズ**: ブラウザのフォントサイズ設定に対応

---

## セキュリティ考慮事項

### 現在の実装（デモ版）
- **認証**: フロントエンドのみ（実際の運用ではサーバーサイド認証が必要）
- **データ保存**: ローカルストレージ（実際の運用ではデータベースが必要）
- **画像保存**: ブラウザメモリ（実際の運用ではファイルサーバーが必要）
- **通信暗号化**: HTTPS対応（実際の運用では必須）

### 推奨改善事項
- **サーバーサイド認証**: JWT、セッション管理
- **データベース**: PostgreSQL、MySQL等
- **ファイルストレージ**: AWS S3、Google Cloud Storage等
- **通信暗号化**: HTTPS/TLS
- **入力値検証**: サーバーサイドバリデーション
- **CSRF対策**: トークンベース認証
- **XSS対策**: 入力値のエスケープ処理

---

## ファイル構成

```
retsu-m/
├── index.html (10KB) - ログイン画面
├── admin/
│   ├── dashboard.html (22KB) - 管理者ダッシュボード
│   ├── projects.html (33KB) - プロジェクト管理
│   ├── project-detail.html (16KB) - プロジェクト詳細
│   └── users.html (27KB) - ユーザー管理
├── client/
│   ├── dashboard.html (22KB) - クライアントダッシュボード
│   ├── setup.html (36KB) - プロジェクトセットアップ
│   ├── submissions.html (33KB) - 応募者管理
│   └── users.html (15KB) - ユーザー作成
├── campaign/
│   ├── top.html (22KB) - キャンペーントップ
│   ├── form.html (28KB) - 応募フォーム
│   ├── confirm.html (14KB) - 確認画面
│   └── complete.html (7.7KB) - 完了画面
├── assets/
│   ├── css/ - スタイルシート
│   ├── js/ - JavaScriptファイル
│   └── images/ - 画像ファイル
└── docs/
    ├── sitemap.md (6.5KB) - サイトマップ
    └── progress.md (7.3KB) - 開発進捗
```

**総ファイルサイズ**: 約300KB（HTMLファイルのみ）

---

## 更新履歴

### 最新更新（個人情報フォーム機能追加）
- **日付**: 2024年
- **内容**:
  - 個人情報フォーム設定機能を追加
  - 必須項目（名前、メール、郵便番号、住所、電話番号）を実装
  - メールアドレス確認機能を追加
  - バリデーション機能を強化
  - 確認画面に個人情報表示を追加

### 今後の予定
- サーバーサイド実装
- データベース連携
- ファイルアップロード機能の強化
- セキュリティ機能の強化
- 多言語対応 